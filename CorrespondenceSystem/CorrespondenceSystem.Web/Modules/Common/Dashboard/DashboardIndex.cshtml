@model CorrespondenceSystem.Common.DashboardPageModel
@inject ITextLocalizer Localizer
@{
    ViewData["Title"] = "Dashboard";
ViewData["PageId"] = "Dashboard";
}

@section Head {
@Html.StyleBundle("Pages/Dashboard")
@Html.ScriptBundle("Pages/Dashboard")
}

@section ContentHeader {
    <h1>@Localizer.Get("Navigation.Dashboard")</h1>
}

<style>
.s-dashboard-card, .s-dashboard-card-sm {
    margin-bottom: var(--bs-gutter-x);
}

.s-dashboard-card .card-header {
    padding: 1rem;
    border-bottom: none;
    background-color: transparent;
}

.s-dashboard-card .card-body {
    border-radius: 0 0 4px 4px;
    padding: 2rem;
            display: flex;
            align-items: center;
}



.s-dashboard-card .card-footer {
    border-top-color: transparent;
    background-color: transparent;
    padding: 1rem;
}

.s-dashboard-card .card-title {
    margin: 0;
    font-size: 1.4rem;
    color: var(--s-table-title);
}

.s-dashboard-card-sm .card-body {
    padding: 1rem;
    border-radius: 4px 4px 0 0;
    margin: 1px;
}

.s-dashboard-card-sm .card-footer {
    color: rgba(var(--s-bright-rgb), 0.8);
    background-color: var(--bs-body-bg);
    border-radius: 0 0 4px 4px;
    border-top: none;
    margin: 0 1px 1px 1px;
    padding: 3px 0;
    text-align: center;
    text-decoration: none;
}

.s-dashboard-card-sm h3 {
    font-size: 38px;
    font-weight: bold;
    margin: 0 0 10px 0;
    white-space: nowrap;
    padding: 0;
}

.s-dashboard-card-sm p {
    font-size: 15px;
}

.s-dashboard-card-sm p > small {
    display: block;
    font-size: 13px;
    margin-top: 5px;
}

.s-dashboard-card-sm .icon {
    transition: all 0.3s linear;
    position: absolute;
    top: 13px;
    color: #fff;
    opacity: 0.9;
    right: 10px;
    font-size: 64px;
}

.bg-world-map {
    background: #3c8dbc;
}

.s-dashboard-card-sm:hover .icon {
    font-size: 70px;
}
</style>


<div class="row">
    <div class="col-lg-3 col-sm-6" id="openLetterForm">
        <div class="card s-dashboard-card-sm bg-primary bg-opacity-50">
            <div class="card-body">
                <i class="fa fa-wpforms icon" style="font-size: 3rem;"></i>
                <h5>Open Letter Form</h5>
            </div>
        </div>
    </div>
    <div class="col-lg-3 col-sm-6" id="openSignForm">
        <div class="card s-dashboard-card-sm bg-primary bg-opacity-50">
            <div class="card-body">
                <i class="fa fa-wpforms icon" style="font-size: 3rem;"></i>
                <h5>Open Sign Form</h5>
            </div>
        </div>
    </div>
    <div class="col-lg-3 col-sm-6" id="openGrandsubjectForm">
        <div class="card s-dashboard-card-sm bg-primary bg-opacity-50">
            <div class="card-body">
                <i class="fa fa-wpforms icon" style="font-size: 3rem;"></i>
                <h5>Open Grandsubject Form</h5>
            </div>
        </div>
    </div>
    <div class="col-lg-3 col-sm-6" id="openTemplateForm">
        <div class="card s-dashboard-card-sm bg-primary bg-opacity-50">
            <div class="card-body">
                <i class="fa fa-wpforms icon" style="font-size: 3rem;"></i>
                <h5>Open Template Form</h5>
            </div>
        </div>
    </div>
</div>

<div class="col-md-6">
    <div class="card border-primary text-dark">
        <div class="card-header d-flex justify-content-between align-items-center bg-transparent">
            <h5 class="mb-0">Letter Chart</h5>
        </div>
        <div class="card-body p-2">
            <canvas id="barChart" class="w-100"></canvas>
        </div>
    </div>
</div>


<script>
    document.getElementById('openLetterForm').addEventListener('click', function () {
        window.location.href = 'https://localhost:64684/LetterDB/Letter#new';
    });
</script>

<script>
    document.getElementById('openSignForm').addEventListener('click', function () {
        window.location.href = 'https://localhost:64684/SignDB/Sign#new';
    });
</script>

<script>
    document.getElementById('openGrandsubjectForm').addEventListener('click', function () {
        window.location.href = 'https://localhost:64684/GrandSubjectDB/GrandSubject#new';
    });
</script>

<script>
    document.getElementById('openTemplateForm').addEventListener('click', function () {
        window.location.href = 'https://localhost:64684/TemplateDB/Template#new';
    });
</script>


<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        var barChartCanvas = document.getElementById("barChart").getContext("2d");

        if (barChartCanvas) {
            var barChart = new Chart(barChartCanvas, {
                type: "bar",
                data: {
                    labels: ["Incoming Letter", "Outgoing Letter"],
                    datasets: [{
                        label: 'Letter Count',
                        data: [@Model.CountIncomingLetter, @Model.CountOutgoingLetter],
                        backgroundColor: ["#87ceeb", "#87ceeb"],
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });

            barChartCanvas.canvas.style.width = "50%";
            barChartCanvas.canvas.style.height = "50%";
        }
    });
</script>
