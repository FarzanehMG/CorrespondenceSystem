import{a as U,b as G,d as N}from"../../../_chunks/chunk-Y3W5SJL7.js";import{a as h,b as A,d as w}from"../../../_chunks/chunk-SQN25MCM.js";import{a as q}from"../../../_chunks/chunk-EAAQUTWP.js";import{c as o,f as i,g as d,i as n}from"../../../_chunks/chunk-THKE7DQS.js";var X=i(n(),1);var E=i(n(),1);var K=i(n(),1),x=(e=>(e[e.Draft=0]="Draft",e[e.Posted=1]="Posted",e[e.Received=2]="Received",e))(x||{});K.Decorators.registerEnumType(x,"CorrespondenceSystem.Modules.Enums.Letter.States","State");var v=class v extends E.ColumnsBase{};o(v,"LetterColumns"),v.columnsKey="LetterDB.Letter",v.Fields=(0,E.fieldsProxy)();var C=v;var H=i(n(),1),k=i(q(),1);var m=class extends k.GridEditorBase{getColumnsKey(){return U.columnsKey}getDialogType(){return N}getLocalTextPrefix(){return G.localTextPrefix}};o(m,"LetterAttachmentEditor"),m=d([H.Decorators.registerEditor("CorrespondenceSystem.LetterAttachmentDB.LetterAttachmentEditor")],m);var l=i(n(),1),M=i(q(),1);var p=class extends M.GridEditorBase{getColumnsKey(){return h.columnsKey}getDialogType(){return w}getLocalTextPrefix(){return A.localTextPrefix}AddSign(){(0,l.serviceCall)({url:(0,l.resolveUrl)("~/Services/SignLettersDB/SignLetters/AddSignLetter"),onSuccess:s=>{var t=this.view.getItems();let e={SignTitle:s.Title,SignId:s.Id,CreatedDate:s.CreatedDate};var f=this.id(e);f==null&&(e[this.getIdProperty()]=this.getNextId()),t.push(e),this.setEntities(t)},method:"post"})}getButtons(){var s=super.getButtons(),t=(0,l.tryFirst)(s,e=>e.cssClass=="add-button");if(t){let e=!0;t.onClick=f=>{e&&(this.AddSign(),e=!1,t.disabled=!0)}}return s}};o(p,"SignLettersEditor"),p=d([l.Decorators.registerEditor("CorrespondenceSystem.SignLettersDB.SignLettersEditor")],p);var r=i(n(),1);var O=i(n(),1),B=(t=>(t[t.Normal=0]="Normal",t[t.Secret=1]="Secret",t))(B||{});O.Decorators.registerEnumType(B,"CorrespondenceSystem.Modules.Enums.Letter.ConfidentialLevels","ConfidentialLevels");var F=i(n(),1),P=(t=>(t[t.Outgoing=0]="Outgoing",t[t.Incoming=1]="Incoming",t))(P||{});F.Decorators.registerEnumType(P,"CorrespondenceSystem.Modules.Enums.Letter.LetterTypes","LetterTypes");var J=i(n(),1),b=(e=>(e[e.Urgent=0]="Urgent",e[e.Instant=1]="Instant",e[e.Normal=2]="Normal",e))(b||{});J.Decorators.registerEnumType(b,"CorrespondenceSystem.Modules.Enums.Letter.PriorityStates","PriorityState");var g=class g extends r.PrefixedContext{constructor(s){if(super(s),!g.init){g.init=!0;var t=r.RadioButtonEditor,e=r.StringEditor,f=r.EnumEditor,y=r.ServiceLookupEditor,R=r.BooleanEditor,V=r.LookupEditor,W=r.TextAreaEditor,Y=m,Z=p;(0,r.initFormType)(g,["LetterType",t,"Title",e,"LetterIdentifier",e,"LetterIdentifierGen",e,"LetterNo",e,"PriorityState",t,"ConfidentialLevel",t,"State",f,"SenderId",y,"ReceiverId",y,"GrandSubjectId",y,"UseDefaultTemplate",R,"TemplateId",V,"LetterContent",W,"Tag",e,"LetterCarrier",e,"HasAttachment",R,"NeedAnswer",R,"DetailList",Y,"SignLettersDetailList",Z])}}};o(g,"LetterForm"),g.formKey="LetterDB.Letter";var D=g;var Q=i(n(),1);var a=class a{};o(a,"LetterRow"),a.idProperty="Id",a.nameProperty="LetterIdentifier",a.localTextPrefix="LetterDB.Letter",a.deletePermission="Administration:General",a.insertPermission="Administration:General",a.readPermission="Administration:General",a.updatePermission="Administration:General",a.Fields=(0,Q.fieldsProxy)();var L=a;var j=i(n(),1),S;(t=>(t.baseUrl="LetterDB/Letter",t.Methods={Create:"LetterDB/Letter/Create",Update:"LetterDB/Letter/Update",Delete:"LetterDB/Letter/Delete",Retrieve:"LetterDB/Letter/Retrieve",List:"LetterDB/Letter/List"},["Create","Update","Delete","Retrieve","List"].forEach(e=>{t[e]=function(f,y,R){return(0,j.serviceRequest)(t.baseUrl+"/"+e,f,y,R)}})))(S||(S={}));var I=i(n(),1);var T=i(n(),1);var c=class extends T.EntityDialog{constructor(){super(...arguments);this.form=new D(this.idPrefix)}getFormKey(){return D.formKey}getRowDefinition(){return L}getService(){return S.baseUrl}};o(c,"LetterDialog"),c=d([T.Decorators.registerClass("CorrespondenceSystem.LetterDB.LetterDialog")],c);var u=class extends I.EntityGrid{getColumnsKey(){return C.columnsKey}getDialogType(){return c}getRowDefinition(){return L}getService(){return S.baseUrl}constructor(s){super(s)}};o(u,"LetterGrid"),u=d([I.Decorators.registerClass("CorrespondenceSystem.LetterDB.LetterGrid")],u);function _(){(0,X.initFullHeightGridPage)(new u($("#GridDiv")).element)}o(_,"pageInit");export{_ as default};
//# sourceMappingURL=LetterPage.js.map
